# TODO


## 目標

最初の目標は、バグがあったりしても、とにかくMinCamlの大体の作りを再現する事です。
２番目の目標は、作り方を書く事です。MinCamlはとても美しい実装ですが、さらに分かりやすくする為に、良くあるプログラミング言語の
作り方のような、ゼロからコンパイラを構築していきます。いきなり、大きな実装があっても、自分で作れる気がしない人も居ると思うのですが、
そのような大きさに対する恐れを減らします。
３番目の目標はテストを付け加える事で、各段階でより正しい実装を楽しく実装出来るようにする事です。
テストを作成することで、実装のミスを見つける事が出来るでしょう。
４番目の目標は最適化パスを追加する事。最初の段階では、最適化は実装されていませんが最適化パスを追加していきます。
５番目の目標はガーベジコレクションや、多相型型推論を導入します。ガーベジコレクションはアルゴリズムを選択出来るようにもしたい所です。

おそらく、３番目の目標が出来上がったら、このノウハウを使ってより構文を変更した言語作り始めるはずです。


当面はバグつぶしと、作り方を書いていきます。

既知のバグ

- Array.createはintしか動かない。
- floatをプリント出来ない。
- 外部関数の定義の読み込みや型推論が動かない。
- print命令を消す。

# 外部関数
# 外部配列
# メイン関数の修正
　コンパイラとして動くようにする。
# 最適化
  iterとアレこれする。

## ソースの修正

- [l01](l01/readme.md)

変数名や関数名の不統一な箇所を１つずつ修正する。

- aE aKと言った変数名を辞めるか、あるいはより全体的に広める。綱引きになると困るのだよね。　deref_typeをderef_typにするとか。
これは、テストを作って、文字列を一気に置き換えプログラムを使って書き換える。そうしないと死ぬ程時間がかかってしまう。

- ある段階で、ソースを複数ファイルに分割する。 diff取って見るのはいいのだけど、main.ml内の変更が多すぎて分かりづらいので修正が必要。
- 全体像が出来上がったら(関数を導入したら、)分割する。l10から徐々に分割しつつ、文章を書いていきたい。
-

## 文書の作成


- テストを追加する
- 型推論をもっと細かい段階に分ける。

- a () という関数呼び出しをできるようにするか、しないか。
